{% load i18n %}
{% load static %}

<table class="table table-sm table-striped">
    <thead>
        <tr class="d-flex">
            <th class="col-5">{% trans "Objects" %}</th>
            <th class="col-3">{% trans "Order" %}</th>
            <th class="col-2">{% trans "Visible" %}</th>
            <th class="col-2 text-right">
                <a  tabindex="0"
                    href="javascript:void(0)"
                    role="button"
                    data-toggle="popover"
                    data-trigger="focus"
                    data-html="true"
                    title="{{popover_title_content.portal_objects.title}}"
                    data-content="{{popover_title_content.portal_objects.content}}">
                    <svg class="icon icon-sm mb-1">
                        <use href="{% static 'svg/sprite.svg' %}#it-help-circle"></use>
                    </svg>
                </a>
            </th>
        </tr>
    </thead>
    <tbody>
        {% for object in topic_obj_regarts.objects %}
            <!-- Object Delete Modal -->
            <div class="modal fade"
                tabindex="-1"
                role="dialog"
                id="delete_object_{{object.id}}">
                <div class="modal-dialog modal-dialog-centered"
                        role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">
                                {% trans "Confirm" %}
                            </h5>
                            <button class="close"
                                    type="button"
                                    data-dismiss="modal"
                                    aria-label="Close">
                                <svg class="icon">
                                    <use xlink:href="{% static 'svg/sprite.svg' %}#it-close"></use>
                                </svg>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>
                                {% trans "Do you want to remove this object from this topic?" %}
                            </p>
                        </div>
                        <div class="modal-footer">
                            <a class="btn btn-success btn-sm" href="{% url 'crud_cds_websites_pages:crud_cds_websites_pages_item_delete' code=cds_website.id topic_id=topic_obj_regarts.topic.id data_id=object.id %}">
                                {% trans 'Yes, proceed' %}
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- /Object Delete Modal -->
            <tr class="d-flex">
                <td class="col-5">
                    {{ object.titolo_it }}
                </td>
                <td class="col-3">
                    {{ object.ordine }}
                </td>
                <td class="col-2">
                    {% if object.visibile %}
                    <svg class="icon icon-sm icon-success">
                        <use xlink:href="{% static 'svg/sprite.svg' %}#it-check-circle"></use>
                    </svg>
                    {% else %}
                    <svg class="icon icon-sm icon-danger">
                        <use xlink:href="{% static 'svg/sprite.svg' %}#it-ban"></use>
                    </svg>
                    {% endif %}
                </td>
                <td class="col-2 text-no-wrap">
                    {% if user.is_superuser or object.id_user_mod.pk not in etl_ids %}
                    <div class="row">
                        <a  href="{% url 'crud_cds_websites_pages:crud_cds_websites_pages_object_item_edit' code=cds_website.id topic_id=topic_obj_regarts.topic.id data_id=object.id %}"
                            class="btn btn-primary btn-xs" style="width:100%;">
                            <svg class="icon icon-xs icon-white">
                                <use xlink:href="{% static 'svg/sprite.svg' %}#it-pencil"></use>
                            </svg>
                            {% trans "Edit" %}
                        </a>
                    </div>
                    <div class="row pt-1">
                        <a  href=""
                            class="btn btn-danger btn-xs" style="width:100%;"
                            data-toggle="modal"
                            data-target="#delete_object_{{object.id}}">
                            <svg class="icon icon-xs icon-white">
                                <use xlink:href="{% static 'svg/sprite.svg' %}#it-delete"></use>
                            </svg>
                            {% trans "Remove" %}
                        </a>
                    </div>
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<a  href="{% url 'crud_cds_websites_pages:crud_cds_websites_pages_object_item_add' code=cds_website.id topic_id=topic_obj_regarts.topic.id %}"
    class="btn btn-xs btn-block btn-success">
    <svg class="icon icon-xs icon-white">
        <use xlink:href="{% static 'svg/sprite.svg' %}#it-plus-circle"></use>
    </svg> {% trans "Add new" %}
</a>