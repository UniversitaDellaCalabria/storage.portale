{% load django_bootstrap_italia %}
{% load i18n %}
{% load static %}
{% load crud_templatetags %}

<!DOCTYPE html>
<html lang="it">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="{% static 'css/regdid-pdf.css' %}" type="text/css" />
        <style>
           {% django_bootstrap_italia_static_path 'fonts' as font_path %}
            /* titillium-web-regular - latin-ext_latin */
            @font-face {
                font-family: "Titillium Web Normal";
                font-style: normal;
                font-weight: normal;
                src: url("{{font_path}}/Titillium_Web/titillium-web-v10-latin-ext_latin-regular.ttf") format("truetype"),
            }
            @font-face {
                font-family: "Titillium Web";
                font-style: normal;
                font-weight: normal;
                src: url("{{font_path}}/Titillium_Web/titillium-web-v10-latin-ext_latin-regular.ttf") format("truetype"),
            }
            /* titillium-web-italic - latin-ext_latin */
            @font-face {
                font-family: "Titillium Web";
                font-style: italic;
                font-weight: normal;
                src: url("{{font_path}}/Titillium_Web/titillium-web-v10-latin-ext_latin-italic.ttf") format("truetype"),
            }
            /* titillium-web-700 - latin-ext_latin */
            @font-face {
                font-family: "Titillium Web";
                font-style: normal;
                font-weight: bold;
                src: url("{{font_path}}/Titillium_Web/titillium-web-v10-latin-ext_latin-700.ttf") format("truetype"),
            }
            /* titillium-web-700italic - latin-ext_latin */
            @font-face {
                font-family: "Titillium Web";
                font-style: italic;
                font-weight: bold;
                src: url("{{font_path}}/Titillium_Web/titillium-web-v10-latin-ext_latin-700italic.ttf") format("truetype"),
            }
        </style>
    </head>
    <body>
        <!-- Content for Static Frame 'header_frame' -->
        <div id="header_content"><image src="{% static 'images/unical_logo.svg' %}" style="width: 6.1cm; height: 1.1cm;"></image></div>
        <!-- Content for Static Frame 'footer_frame' -->
        <div id="footer_content" style="text-align:center;"><pdf:pagenumber />&nbsp;</div>
        
        <!-- PDF CONTENT -->
        
        <div class="reg-title content">
            Regolamento didattico del<br />
                {{nome_corso}}<br />
            <span style="font-weight: normal;">
                {{classe_laurea_desc}}
            </span>
        </div>
        
        <pdf:nexttemplate name="toc_page" />

        <div>
            <pdf:nextpage /> 
        </div> 

        <span class="index content">Indice</span>
        <div class="toc_text">
            <pdf:toc /> 
        </div>

        <pdf:nexttemplate name="regular_page" />

        <div>
            <pdf:nextpage /> 
        </div> 

        <div class="content">
            {% autoescape off %}
            {% for title, struct_art_list in titoli_struttura_articoli_dict.items %}
                <div class="keep-with-next">
                    <div class="section-title toc-title">
                        {{ title.descr_titolo_it }}
                    </div>
                    <div class="not-keep-with-next">
                        {% for struct_art in struct_art_list %}
                            {% for struct, art_sub_arts in struct_art.items %}
                                {% for article, sub_articles in art_sub_arts.items %}
                                    <div class="keep-with-next">
                                        <div class="art toc-article">
                                            Art. {{struct.numero}} - {{struct.titolo_it}}
                                        </div>
                                        <div class="text not-keep-with-next">
                                            {% if article.testo_it %}{{article.testo_it}}{% else %}Articolo non applicabile{% endif %}
                                            <div class="text-divider">&nbsp;</div>
                                        </div>
                                    </div>
                                    {% for sub_art in sub_articles %}
                                        <div class="art toc-article keep-with-next">
                                            Art. {{struct.numero}} {% latin_enum forloop.counter0 %} - {{sub_art.titolo_it}}
                                        </div>
                                        <div class="text not-keep-with-next">
                                            {{sub_art.testo_it}}
                                            <div class="text-divider">&nbsp;</div>
                                        </div>
                                    {% endfor %}
                                {% endfor %}
                            {% endfor %}
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
        {% endautoescape %}

    </body>
</html>
