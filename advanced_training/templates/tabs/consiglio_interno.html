{% load i18n %}
{% load static %}

<div class="card-wrapper card-space">
  <div class="card card-bg no-after">
    <div class="card-body">
      <h4 style="font-weight: lighter;">
        {% trans "Internal Scientific Council" %}
      </h4>
      
      {% if consiglio_members %}
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>{% trans "Name" %}</th>
            <th>{% trans "Type" %}</th>
            <th class="text-right">{% trans "Actions" %}</th>
          </tr>
        </thead>
        <tbody>
          {% for member in consiglio_members %}
          <tr>
            <td>{{ member.nome_origine_cons|default:"-" }}</td>
            <td>
              {% if member.matricola_cons %}
                <span class="badge badge-success">{% trans "Internal" %}</span>
              {% else %}
                <span class="badge badge-info">{% trans "External" %}</span>
              {% endif %}
            </td>
            <td class="text-right">
              {% if not is_readonly %}
              <a href="{% url 'advanced-training:management:consiglio-interno-edit' master_id=master.pk consiglio_id=member.pk %}" 
                 class="btn btn-primary btn-xs">
                <svg class="icon icon-xs icon-white">
                  <use xlink:href="{% static 'svg/sprite.svg' %}#it-pencil"></use>
                </svg> {% trans "Edit" %}
              </a>
              <a href="" 
                 class="btn btn-danger btn-xs"
                 data-toggle="modal"
                 data-target="#delete_member_{{ member.pk }}">
                <svg class="icon icon-xs icon-white">
                  <use xlink:href="{% static 'svg/sprite.svg' %}#it-delete"></use>
                </svg> {% trans "Remove" %}
              </a>
              {% endif %}
            </td>
          </tr>
          
          <!-- Modal conferma eliminazione -->
          <div class="modal fade"
               tabindex="-1"
               role="dialog"
               id="delete_member_{{ member.pk }}">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">
                    {% trans "Confirm" %}
                  </h5>
                  <button class="close"
                          type="button"
                          data-dismiss="modal"
                          aria-label="Close">
                    <svg class="icon">
                      <use xlink:href="{% static 'svg/sprite.svg' %}#it-close"></use>
                    </svg>
                  </button>
                </div>
                <div class="modal-body">
                  <p>
                    {% trans "Do you want to delete the selected council member?" %}
                  </p>
                  <p class="font-weight-bold">{{ member.nome_origine_cons }}</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">
                    {% trans 'Cancel' %}
                  </button>
                  <a class="btn btn-danger btn-sm" 
                     href="{% url 'advanced-training:management:consiglio-interno-delete' master_id=master.pk consiglio_id=member.pk %}">
                    {% trans 'Yes, proceed' %}
                  </a>
                </div>
              </div>
            </div>
          </div>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <div class="alert alert-info" role="alert">
        <i class="fas fa-info-circle"></i>
        {% trans "No internal council members added yet." %}
      </div>
      {% endif %}
      
      {% if not is_readonly %}
      <a href="{% url 'advanced-training:management:consiglio-interno-new' master_id=master.pk %}" 
         class="btn btn-block btn-success">
        <svg class="icon icon-xs icon-white">
          <use xlink:href="{% static 'svg/sprite.svg' %}#it-plus-circle"></use>
        </svg> {% trans "Add new member" %}
      </a>
      {% endif %}
    </div>
  </div>
</div>